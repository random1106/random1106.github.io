<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CTF Writeups</title>
  <meta name="description" content="Personal CTF writeups index" />
  <link href="/assets/css/writeup.css" rel="stylesheet">
</head>
<body>
  <div class="wrap" id="app">
    <header>
      <h1>CTF Writeups</h1>
      <p class="lead">A minimal index of my CTF notes and solutions — clean and distraction‑free.</p>
    </header>

    <hr />

    <main id="writeups" aria-live="polite"></main>

    <footer>
      <div>Simple index · Markdown‑like typography · <span class="muted">drop into GitHub Pages</span></div>
    </footer>
  </div>

  <script>
    // === Data ================================================================
    // Add entries by pushing objects into ENTRIES.
    // Fields: title, event, date (YYYY-MM-DD), link, tags: [..]
    const ENTRIES = [
      {title:'Sekai Meme Launcher Writeup', event:'Sekai CTF', date:'2025-08-16', link:'writeups/memelauncher.html', tags:['blockchain']},
      {title:'Dinosaur Park', event:'WWCTF', date:'2025-07-26', link:'#', tags:['blockchain']},
      {title:'Solidity Jail 2', event:'WWCTF', date:'2025-07-26', link:'#', tags:['blockchain']},
      {title:'Solidity Jail 1', event:'WWCTF', date:'2025-07-26', link:'#', tags:['blockchain']},
      {title:'NeverEnough', event:'smileyCTF', date:'2025-06-14', link:'#', tags:['crypto']},
      {title:'multisig-wallet', event:'smileyCTF', date:'2025-06-14', link:'#', tags:['blockchain']},
      {title:'Saas', event:'smileyCTF', date:'2025-06-14', link:'#', tags:['crypto']}
    ];

    // === Render ==============================================================
    const $ = (s,sc=document)=>sc.querySelector(s);
    const byYearDesc = (a,b)=> b.localeCompare(a);

    function groupByYear(list){
      const map = new Map();
      for(const it of list){
        const y = it.date.slice(0,4);
        if(!map.has(y)) map.set(y,[]);
        map.get(y).push(it);
      }
      for(const [y,arr] of map){ arr.sort((a,b)=>b.date.localeCompare(a.date)); }
      return [...map.entries()].sort((a,b)=>byYearDesc(a[0],b[0]));
    }

    function itemHTML(it){
      const tagStr = it.tags?.map(t=>`<code>${t}</code>`).join(' ');
      return `<li>
        <div class="item-title"><a href="${it.link}">${it.title}</a></div>
        <div class="meta">${it.event} · <time datetime="${it.date}">${it.date}</time>${tagStr? ' · '+tagStr: ''}</div>
      </li>`
    }

    function render(list){
      const container = $('#writeups');
      const groups = groupByYear(list);
      const mostRecentYear = groups[0]?.[0];

      container.innerHTML = groups.map(([year, items])=>{
        const itemsHTML = `<ul>${items.map(itemHTML).join('')}</ul>`;
        // 用 details/summary 折叠；最新年份默认展开
        return `
          <details ${year === mostRecentYear ? 'open' : ''}>
            <summary>
              <h2 id="y${year}" style="margin:0">${year} <a class="hash" href="#y${year}">⌗</a></h2>
              <span class="count">${items.length} item${items.length>1?'s':''}</span>
            </summary>
            ${itemsHTML}
          </details>
        `;
      }).join('');
    }

    render(ENTRIES);

    // ===== Back-to-Top 按钮逻辑 =====
    const backTop = document.getElementById('backTop');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 600) backTop.classList.add('show');
      else backTop.classList.remove('show');
    });
    backTop.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    
  </script>
</body>
</html>